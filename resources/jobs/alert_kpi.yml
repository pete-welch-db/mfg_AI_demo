# KPI alert job: margin < 8%, on-time < 95%, OEE < 75%. Run on schedule; outputs breaches with links to app/Genie.
resources:
  jobs:
    mfg_demo_alert_kpi:
      name: mfg_demo_alert_kpi
      schedule:
        quartz_cron_expression: "0 0 6 * * ?"
        timezone_id: "America/Chicago"
      tasks:
        - task_key: run_alerts
          notebook_task:
            notebook_path: ${workspace.file_path}/notebooks/06_alerts_kpi
            base_parameters:
              catalog: "${var.catalog}"
              schema: "${var.schema}"
          job_cluster_key: job_cluster
      job_clusters:
        - job_cluster_key: job_cluster
          new_cluster:
            spark_version: "14.3.x-scala2.12"
            node_type_id: "Standard_DS3_v2"
            num_workers: 0
